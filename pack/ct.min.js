(()=>{var t={363:()=>{(function(){"use strict";var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,o=window.Document.prototype.append,i=window.DocumentFragment.prototype.prepend,a=window.DocumentFragment.prototype.append,l=window.Node.prototype.cloneNode,s=window.Node.prototype.appendChild,c=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,h=window.Node.prototype.replaceChild,d=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),f=window.Element.prototype.attachShadow,p=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),m=window.Element.prototype.getAttribute,g=window.Element.prototype.setAttribute,y=window.Element.prototype.removeAttribute,v=window.Element.prototype.toggleAttribute,b=window.Element.prototype.getAttributeNS,_=window.Element.prototype.setAttributeNS,w=window.Element.prototype.removeAttributeNS,E=window.Element.prototype.insertAdjacentElement,C=window.Element.prototype.insertAdjacentHTML,k=window.Element.prototype.prepend,S=window.Element.prototype.append,T=window.Element.prototype.before,N=window.Element.prototype.after,x=window.Element.prototype.replaceWith,D=window.Element.prototype.remove,A=window.HTMLElement,O=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),j=window.HTMLElement.prototype.insertAdjacentElement,I=window.HTMLElement.prototype.insertAdjacentHTML,P=new Set;function L(t){var e=P.has(t);return t=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(t),!e&&t}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(t){return P.add(t)}));var F=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function M(t){var e=t.isConnected;if(void 0!==e)return e;if(F(t))return!0;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function R(t){var e=t.children;if(e)return Array.prototype.slice.call(e);for(e=[],t=t.firstChild;t;t=t.nextSibling)t.nodeType===Node.ELEMENT_NODE&&e.push(t);return e}function H(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function U(t,e,n){for(var r=t;r;){if(r.nodeType===Node.ELEMENT_NODE){var o=r;e(o);var i=o.localName;if("link"===i&&"import"===o.getAttribute("rel")){if(r=o.import,void 0===n&&(n=new Set),r instanceof Node&&!n.has(r))for(n.add(r),r=r.firstChild;r;r=r.nextSibling)U(r,e,n);r=H(t,o);continue}if("template"===i){r=H(t,o);continue}if(o=o.__CE_shadowRoot)for(o=o.firstChild;o;o=o.nextSibling)U(o,e,n)}r=r.firstChild?r.firstChild:H(t,r)}}function q(){var t=!(null==lt||!lt.noDocumentConstructionObserver),e=!(null==lt||!lt.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=e,this.I=!t}function B(t,e,n,r){var o=window.ShadyDOM;if(t.shadyDomFastWalk&&o&&o.inUse){if(e.nodeType===Node.ELEMENT_NODE&&n(e),e.querySelectorAll)for(t=o.nativeMethods.querySelectorAll.call(e,"*"),e=0;e<t.length;e++)n(t[e])}else U(e,n,r)}function W(t,e){t.j&&B(t,e,(function(e){return $(t,e)}))}function $(t,e){if(t.j&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.m.length;n++)t.m[n](e);for(n=0;n<t.g.length;n++)t.g[n](e)}}function V(t,e){var n=[];for(B(t,e,(function(t){return n.push(t)})),e=0;e<n.length;e++){var r=n[e];1===r.__CE_state?t.connectedCallback(r):Q(t,r)}}function z(t,e){var n=[];for(B(t,e,(function(t){return n.push(t)})),e=0;e<n.length;e++){var r=n[e];1===r.__CE_state&&t.disconnectedCallback(r)}}function J(t,e,n){var r=(n=void 0===n?{}:n).J,o=n.upgrade||function(e){return Q(t,e)},i=[];for(B(t,e,(function(e){if(t.j&&$(t,e),"link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:e.addEventListener("load",(function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var i=new Set;r&&(r.forEach((function(t){return i.add(t)})),i.delete(n)),J(t,n,{J:i,upgrade:o})}}))}else i.push(e)}),r),e=0;e<i.length;e++)o(i[e])}function Q(t,e){try{var n=e.ownerDocument,r=n.__CE_registry,o=r&&(n.defaultView||n.__CE_isImportDocument)?ot(r,e.localName):void 0;if(o&&void 0===e.__CE_state){o.constructionStack.push(e);try{try{if(new o.constructorFunction!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{o.constructionStack.pop()}}catch(t){throw e.__CE_state=2,t}if(e.__CE_state=1,e.__CE_definition=o,o.attributeChangedCallback&&e.hasAttributes()){var i=o.observedAttributes;for(o=0;o<i.length;o++){var a=i[o],l=e.getAttribute(a);null!==l&&t.attributeChangedCallback(e,a,null,l,null)}}M(e)&&t.connectedCallback(e)}}catch(t){K(t)}}function G(n,r,o,i){var a=r.__CE_registry;if(a&&(null===i||"http://www.w3.org/1999/xhtml"===i)&&(a=ot(a,o)))try{var l=new a.constructorFunction;if(void 0===l.__CE_state||void 0===l.__CE_definition)throw Error("Failed to construct '"+o+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==l.namespaceURI)throw Error("Failed to construct '"+o+"': The constructed element's namespace must be the HTML namespace.");if(l.hasAttributes())throw Error("Failed to construct '"+o+"': The constructed element must not have any attributes.");if(null!==l.firstChild)throw Error("Failed to construct '"+o+"': The constructed element must not have any children.");if(null!==l.parentNode)throw Error("Failed to construct '"+o+"': The constructed element must not have a parent node.");if(l.ownerDocument!==r)throw Error("Failed to construct '"+o+"': The constructed element's owner document is incorrect.");if(l.localName!==o)throw Error("Failed to construct '"+o+"': The constructed element's local name is incorrect.");return l}catch(a){return K(a),r=null===i?t.call(r,o):e.call(r,i,o),Object.setPrototypeOf(r,HTMLUnknownElement.prototype),r.__CE_state=2,r.__CE_definition=void 0,$(n,r),r}return $(n,r=null===i?t.call(r,o):e.call(r,i,o)),r}function K(t){var e="",n="",r=0,o=0;t instanceof Error?(e=t.message,n=t.sourceURL||t.fileName||"",r=t.line||t.lineNumber||0,o=t.column||t.columnNumber||0):e="Uncaught "+String(t);var i=void 0;void 0===ErrorEvent.prototype.initErrorEvent?i=new ErrorEvent("error",{cancelable:!0,message:e,filename:n,lineno:r,colno:o,error:t}):((i=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,e,n,r),i.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===i.error&&Object.defineProperty(i,"error",{configurable:!0,enumerable:!0,get:function(){return t}}),window.dispatchEvent(i),i.defaultPrevented||console.error(t)}function X(){var t=this;this.g=void 0,this.F=new Promise((function(e){t.l=e}))}function Y(t){var e=document;this.l=void 0,this.h=t,this.g=e,J(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function Z(t){t.l&&t.l.disconnect()}function tt(t){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(t){return t()},this.i=!1,this.v=[],this.h=t,this.D=t.I?new Y(t):void 0}function et(t,e){if(!L(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(ot(t,e))throw Error("A custom element with name '"+e+"' has already been defined.");if(t.A)throw Error("A custom element is already being defined.")}function nt(t,e,n){var r;t.A=!0;try{var o=n.prototype;if(!(o instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var i=function(t){var e=o[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},a=i("connectedCallback"),l=i("disconnectedCallback"),s=i("adoptedCallback"),c=(r=i("attributeChangedCallback"))&&n.observedAttributes||[]}catch(t){throw t}finally{t.A=!1}return n={localName:e,constructorFunction:n,connectedCallback:a,disconnectedCallback:l,adoptedCallback:s,attributeChangedCallback:r,observedAttributes:c,constructionStack:[]},t.u.set(e,n),t.C.set(n.constructorFunction,n),n}function rt(t){if(!1!==t.i){t.i=!1;for(var e=[],n=t.v,r=new Map,o=0;o<n.length;o++)r.set(n[o],[]);for(J(t.h,document,{upgrade:function(n){if(void 0===n.__CE_state){var o=n.localName,i=r.get(o);i?i.push(n):t.u.has(o)&&e.push(n)}}}),o=0;o<e.length;o++)Q(t.h,e[o]);for(o=0;o<n.length;o++){for(var i=n[o],a=r.get(i),l=0;l<a.length;l++)Q(t.h,a[l]);(i=t.B.get(i))&&i.resolve(void 0)}n.length=0}}function ot(t,e){var n=t.u.get(e);if(n)return n;if(n=t.s.get(e)){t.s.delete(e);try{return nt(t,e,n())}catch(t){K(t)}}}function it(t,e,n){function r(e){return function(n){for(var r=[],o=0;o<arguments.length;++o)r[o]=arguments[o];o=[];for(var i=[],a=0;a<r.length;a++){var l=r[a];if(l instanceof Element&&M(l)&&i.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)o.push(l);else o.push(l)}for(e.apply(this,r),r=0;r<i.length;r++)z(t,i[r]);if(M(this))for(r=0;r<o.length;r++)(i=o[r])instanceof Element&&V(t,i)}}void 0!==n.prepend&&(e.prepend=r(n.prepend)),void 0!==n.append&&(e.append=r(n.append))}q.prototype.connectedCallback=function(t){var e=t.__CE_definition;if(e.connectedCallback)try{e.connectedCallback.call(t)}catch(t){K(t)}},q.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;if(e.disconnectedCallback)try{e.disconnectedCallback.call(t)}catch(t){K(t)}},q.prototype.attributeChangedCallback=function(t,e,n,r,o){var i=t.__CE_definition;if(i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(e))try{i.attributeChangedCallback.call(t,e,n,r,o)}catch(t){K(t)}},X.prototype.resolve=function(t){if(this.g)throw Error("Already resolved.");this.g=t,this.l(t)},Y.prototype.G=function(t){var e=this.g.readyState;for("interactive"!==e&&"complete"!==e||Z(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,r=0;r<n.length;r++)J(this.h,n[r])},tt.prototype.H=function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");et(this,t),this.s.set(t,e),this.v.push(t),this.i||(this.i=!0,this.o((function(){return rt(n)})))},tt.prototype.define=function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");et(this,t),nt(this,t,e),this.v.push(t),this.i||(this.i=!0,this.o((function(){return rt(n)})))},tt.prototype.upgrade=function(t){J(this.h,t)},tt.prototype.get=function(t){if(t=ot(this,t))return t.constructorFunction},tt.prototype.whenDefined=function(t){if(!L(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.B.get(t);if(e)return e.F;e=new X,this.B.set(t,e);var n=this.u.has(t)||this.s.has(t);return t=-1===this.v.indexOf(t),n&&t&&e.resolve(void 0),e.F},tt.prototype.polyfillWrapFlushCallback=function(t){this.D&&Z(this.D);var e=this.o;this.o=function(n){return t((function(){return e(n)}))}},tt.prototype.define=tt.prototype.define,tt.prototype.upgrade=tt.prototype.upgrade,tt.prototype.get=tt.prototype.get,tt.prototype.whenDefined=tt.prototype.whenDefined,tt.prototype.polyfillDefineLazy=tt.prototype.H,tt.prototype.polyfillWrapFlushCallback=tt.prototype.polyfillWrapFlushCallback;var at={},lt=window.customElements;function st(){var P=new q;!function(e){function n(){var n=this.constructor,r=document.__CE_registry.C.get(n);if(!r)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var o=r.constructionStack;if(0===o.length)return o=t.call(document,r.localName),Object.setPrototypeOf(o,n.prototype),o.__CE_state=1,o.__CE_definition=r,$(e,o),o;var i=o.length-1,a=o[i];if(a===at)throw Error("Failed to construct '"+r.localName+"': This element was already constructed.");return o[i]=at,Object.setPrototypeOf(a,n.prototype),$(e,a),a}n.prototype=A.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:n}),window.HTMLElement=n}(P),function(t){Document.prototype.createElement=function(e){return G(t,this,e,null)},Document.prototype.importNode=function(e,r){return e=n.call(this,e,!!r),this.__CE_registry?J(t,e):W(t,e),e},Document.prototype.createElementNS=function(e,n){return G(t,this,n,e)},it(t,Document.prototype,{prepend:r,append:o})}(P),it(P,DocumentFragment.prototype,{prepend:i,append:a}),function(t){function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,e);else{var r=void 0;if(this.firstChild){var o=this.childNodes,i=o.length;if(0<i&&M(this)){r=Array(i);for(var a=0;a<i;a++)r[a]=o[a]}}if(n.set.call(this,e),r)for(e=0;e<r.length;e++)z(t,r[e])}}})}Node.prototype.insertBefore=function(e,n){if(e instanceof DocumentFragment){var r=R(e);if(e=c.call(this,e,n),M(this))for(n=0;n<r.length;n++)V(t,r[n]);return e}return r=e instanceof Element&&M(e),n=c.call(this,e,n),r&&z(t,e),M(this)&&V(t,e),n},Node.prototype.appendChild=function(e){if(e instanceof DocumentFragment){var n=R(e);if(e=s.call(this,e),M(this))for(var r=0;r<n.length;r++)V(t,n[r]);return e}return n=e instanceof Element&&M(e),r=s.call(this,e),n&&z(t,e),M(this)&&V(t,e),r},Node.prototype.cloneNode=function(e){return e=l.call(this,!!e),this.ownerDocument.__CE_registry?J(t,e):W(t,e),e},Node.prototype.removeChild=function(e){var n=e instanceof Element&&M(e),r=u.call(this,e);return n&&z(t,e),r},Node.prototype.replaceChild=function(e,n){if(e instanceof DocumentFragment){var r=R(e);if(e=h.call(this,e,n),M(this))for(z(t,n),n=0;n<r.length;n++)V(t,r[n]);return e}r=e instanceof Element&&M(e);var o=h.call(this,e,n),i=M(this);return i&&z(t,n),r&&z(t,e),i&&V(t,e),o},d&&d.get?e(Node.prototype,d):function(t,e){t.j=!0,t.m.push(e)}(t,(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=this.firstChild;e;e=e.nextSibling)e.nodeType!==Node.COMMENT_NODE&&t.push(e.textContent);return t.join("")},set:function(t){for(;this.firstChild;)u.call(this,this.firstChild);null!=t&&""!==t&&s.call(this,document.createTextNode(t))}})}))}(P),function(t){function n(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var r=this,o=void 0;if(M(this)&&(o=[],B(t,this,(function(t){t!==r&&o.push(t)}))),n.set.call(this,e),o)for(var i=0;i<o.length;i++){var a=o[i];1===a.__CE_state&&t.disconnectedCallback(a)}return this.ownerDocument.__CE_registry?J(t,this):W(t,this),e}})}function r(e,n){e.insertAdjacentElement=function(e,r){var o=M(r);return e=n.call(this,e,r),o&&z(t,r),M(e)&&V(t,r),e}}function o(e,n){function r(e,n){for(var r=[];e!==n;e=e.nextSibling)r.push(e);for(n=0;n<r.length;n++)J(t,r[n])}e.insertAdjacentHTML=function(t,e){if("beforebegin"===(t=t.toLowerCase())){var o=this.previousSibling;n.call(this,t,e),r(o||this.parentNode.firstChild,this)}else if("afterbegin"===t)o=this.firstChild,n.call(this,t,e),r(this.firstChild,o);else if("beforeend"===t)o=this.lastChild,n.call(this,t,e),r(o||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");o=this.nextSibling,n.call(this,t,e),r(this.nextSibling,o)}}}f&&(Element.prototype.attachShadow=function(e){if(e=f.call(this,e),t.j&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.m.length;n++)t.m[n](e)}return this.__CE_shadowRoot=e}),p&&p.get?n(Element.prototype,p):O&&O.get?n(HTMLElement.prototype,O):function(t,e){t.j=!0,t.g.push(e)}(t,(function(t){n(t,{enumerable:!0,configurable:!0,get:function(){return l.call(this,!0).innerHTML},set:function(t){var n="template"===this.localName,r=n?this.content:this,o=e.call(document,this.namespaceURI,this.localName);for(o.innerHTML=t;0<r.childNodes.length;)u.call(r,r.childNodes[0]);for(t=n?o.content:o;0<t.childNodes.length;)s.call(r,t.childNodes[0])}})})),Element.prototype.setAttribute=function(e,n){if(1!==this.__CE_state)return g.call(this,e,n);var r=m.call(this,e);g.call(this,e,n),n=m.call(this,e),t.attributeChangedCallback(this,e,r,n,null)},Element.prototype.setAttributeNS=function(e,n,r){if(1!==this.__CE_state)return _.call(this,e,n,r);var o=b.call(this,e,n);_.call(this,e,n,r),r=b.call(this,e,n),t.attributeChangedCallback(this,n,o,r,e)},Element.prototype.removeAttribute=function(e){if(1!==this.__CE_state)return y.call(this,e);var n=m.call(this,e);y.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)},v&&(Element.prototype.toggleAttribute=function(e,n){if(1!==this.__CE_state)return v.call(this,e,n);var r=m.call(this,e);return null!==r!==(n=v.call(this,e,n))&&t.attributeChangedCallback(this,e,r,n?"":null,null),n}),Element.prototype.removeAttributeNS=function(e,n){if(1!==this.__CE_state)return w.call(this,e,n);var r=b.call(this,e,n);w.call(this,e,n);var o=b.call(this,e,n);r!==o&&t.attributeChangedCallback(this,n,r,o,e)},j?r(HTMLElement.prototype,j):E&&r(Element.prototype,E),I?o(HTMLElement.prototype,I):C&&o(Element.prototype,C),it(t,Element.prototype,{prepend:k,append:S}),function(t){function e(e){return function(n){for(var r=[],o=0;o<arguments.length;++o)r[o]=arguments[o];o=[];for(var i=[],a=0;a<r.length;a++){var l=r[a];if(l instanceof Element&&M(l)&&i.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)o.push(l);else o.push(l)}for(e.apply(this,r),r=0;r<i.length;r++)z(t,i[r]);if(M(this))for(r=0;r<o.length;r++)(i=o[r])instanceof Element&&V(t,i)}}var n=Element.prototype;void 0!==T&&(n.before=e(T)),void 0!==N&&(n.after=e(N)),void 0!==x&&(n.replaceWith=function(e){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];r=[];for(var o=[],i=0;i<n.length;i++){var a=n[i];if(a instanceof Element&&M(a)&&o.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(i=M(this),x.apply(this,n),n=0;n<o.length;n++)z(t,o[n]);if(i)for(z(t,this),n=0;n<r.length;n++)(o=r[n])instanceof Element&&V(t,o)}),void 0!==D&&(n.remove=function(){var e=M(this);D.call(this),e&&z(t,this)})}(t)}(P),window.CustomElementRegistry=tt,P=new tt(P),document.__CE_registry=P,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:P})}lt&&!lt.forcePolyfill&&"function"==typeof lt.define&&"function"==typeof lt.get||st(),window.__CE_installPolyfill=st}).call(self)},609:()=>{self.fetch||(self.fetch=function(t,e){return e=e||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],a={},l=function t(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:t,headers:{keys:function(){return i},entries:function(){return i.map((function(t){return[t,o.getResponseHeader(t)]}))},get:function(t){return o.getResponseHeader(t)},has:function(t){return null!=o.getResponseHeader(t)}}}};for(var s in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,(function(t,e){a[e]||i.push(a[e]=e)})),n(l())},o.onerror=r,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(s,e.headers[s]);o.send(e.body||null)}))})}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}(()=>{"use strict";n(363),n(609);var t=Object.defineProperty,e=(e,n,r)=>(((e,n,r)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r})(e,"symbol"!=typeof n?n+"":n,r),r);class r{constructor(t,n){e(this,"result"),e(this,"loading"),e(this,"token"),e(this,"fallbackError"),e(this,"cacheKey"),this.token=t,this.fallbackError=n,this.cacheKey=`ct:checkin:${this.token}`}clear(){return this.loading=!1,this.result=void 0,this}send(t){return e=this,null,n=function*(){this.loading=!0;try{if(this.result)return this.result;const e=`https://api.staging.atendesimples.com/call-tracking/check-in/2/${this.token}`,n={method:"POST",body:JSON.stringify(t),headers:{"x-as-key":this.token,"Content-type":"application/json"}};let r=yield fetch(e,n);if(r.status>422)return this.result={type:"error",number:this.fallbackError},this.result;let o=yield r.json();return this.result=o,this.loading=!1,o}catch(t){return this.result={type:"error",number:this.fallbackError},this.result}finally{this.loading=!1}},new Promise(((t,r)=>{var o=t=>{try{a(n.next(t))}catch(t){r(t)}},i=t=>{try{a(n.throw(t))}catch(t){r(t)}},a=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,i);a((n=n.apply(e,null)).next())}));var e,n}}class o{static call(t){return e=this,n=arguments,r=function*({token:t,number:e}){return fetch(`https://api.staging.atendesimples.com/call-tracking/checkout/${t}/${e}`,{method:"POST",keepalive:!0,headers:{"x-as-key":t,"Content-type":"application/json"}})},new Promise(((t,o)=>{var i=t=>{try{l(r.next(t))}catch(t){o(t)}},a=t=>{try{l(r.throw(t))}catch(t){o(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,a);l((r=r.apply(e,n)).next())}));var e,n,r}}var i=Object.defineProperty,a=(t,e,n)=>(((t,e,n)=>{e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const l=new class{constructor(){a(this,"success"),a(this,"response")}call(t){return e=this,n=arguments,r=function*({token:t,visitor:e,number:n}){try{const r=`https://api.staging.atendesimples.com/call-tracking/ping/${e}/${n}`,o={method:"POST",headers:{"x-as-key":t,"Content-type":"application/json"}};let i=yield fetch(r,o);return this.success=200==i.status,this.response=yield i.json(),this}catch(t){return this}},new Promise(((t,o)=>{var i=t=>{try{l(r.next(t))}catch(t){o(t)}},a=t=>{try{l(r.throw(t))}catch(t){o(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,a);l((r=r.apply(e,n)).next())}));var e,n,r}};function s(t){let e={},n={};for(var r in t)n[r]=t[r];return Object.keys(n).forEach((function(n,r){t[n]&&(e[n]=t[n],sessionStorage.setItem(n,t[n]))})),e}function c(t){let e={};for(var n in t)e[n]=t[n];let r=function(t){return localStorage.getItem(t)||void 0};return{properties:e,first:function(){let t={};return Object.keys(e).forEach((function(n,o){r(n)||localStorage.setItem(n,e[n]),t[n]=r(n)})),t},latest:function(){let t={};return Object.keys(e).forEach((function(n,o){localStorage.setItem(n,e[n]),t[n]=r(n)})),t}}}const u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let h;const d=new Uint8Array(16);function f(){if(!h&&(h="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!h))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(d)}const p=[];for(let t=0;t<256;++t)p.push((t+256).toString(16).slice(1));const m=function(t,e,n){if(u.randomUUID&&!e&&!t)return u.randomUUID();const r=(t=t||{}).random||(t.rng||f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return(p[t[e+0]]+p[t[e+1]]+p[t[e+2]]+p[t[e+3]]+"-"+p[t[e+4]]+p[t[e+5]]+"-"+p[t[e+6]]+p[t[e+7]]+"-"+p[t[e+8]]+p[t[e+9]]+"-"+p[t[e+10]]+p[t[e+11]]+p[t[e+12]]+p[t[e+13]]+p[t[e+14]]+p[t[e+15]]).toLowerCase()}(r)};class g{static get(t){return document.querySelector(t)}static updateValue(t,e){let n=this.get(t);return n.textContent=e,n}static cid(){let t=document.cookie.split(";").find((t=>t.match(/_ga=(.+?)/)));return t?t.split(".").slice(-2).join("."):""}}function y(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?null:decodeURIComponent(e[1].replace(/\+/g," "))}function v(t){return sessionStorage.getItem(t)?sessionStorage.getItem(t):y(t)?y(t):null}function b(t,e=""){return localStorage.getItem(t)?localStorage.getItem(t):e}function _(t,e="no_utm"){return v(t)?v(t):e||"no_utm"}function w(){return g.cid()||"no_cid"}function E(){return location.protocol?location.protocol+"//"+location.hostname+location.pathname:""}function C(){return location.search||""}function k(){return document.referrer||"direto"}const S={QueryStringSession:s,Context:c,Analytics:class{static createSessionByQueryString(){return s({utm_source:_("utm_source"),utm_medium:_("utm_medium"),utm_campaign:_("utm_campaign"),utm_id:_("utm_campaignid"),utm_term:_("utm_term"),utm_content:_("utm_content"),last_referrer:v("last_referrer")||k(),last_page:v("last_page")||E(),last_querystring:v("last_querystring")||C()})}static fixed(){let t=c({utm_source:_("utm_source"),utm_medium:_("utm_medium"),utm_campaign:_("utm_campaign"),utm_id:_("utm_campaignid"),utm_term:_("utm_term"),utm_content:_("utm_content"),referrer:k(),page:E(),querystring:C(),cid:w(),date:(new Date).toISOString(),fingerprint:b("fingerprint",m())}),e=t.first();return{context:t,attributes:e}}static latest(){let t=c({last_utm_source:_("utm_source"),last_utm_medium:_("utm_medium"),last_utm_campaign:_("utm_campaign"),last_utm_id:_("utm_campaignid"),last_utm_term:_("utm_term"),last_utm_content:_("utm_content"),last_referrer:v("last_referrer")||k(),last_page:v("last_page")||E(),last_querystring:v("last_querystring")||C(),last_cid:w(),last_convert_page:location.href}),e=t.latest();return{context:t,attributes:e}}static call(){return this.createSessionByQueryString(),{fixed:this.fixed(),latest:this.latest()}}}};var T=Object.defineProperty,N=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,A=(t,e,n)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||(e={}))x.call(e,n)&&A(t,n,e[n]);if(N)for(var n of N(e))D.call(e,n)&&A(t,n,e[n]);return t},j=(t,e,n)=>(A(t,"symbol"!=typeof e?e+"":e,n),n),I=(t,e,n)=>new Promise(((r,o)=>{var i=t=>{try{l(n.next(t))}catch(t){o(t)}},a=t=>{try{l(n.throw(t))}catch(t){o(t)}},l=t=>t.done?r(t.value):Promise.resolve(t.value).then(i,a);l((n=n.apply(t,e)).next())}));class P extends HTMLElement{constructor(){super(),j(this,"number"),j(this,"checkin"),j(this,"shadow"),j(this,"token"),j(this,"eventType"),j(this,"fallbackErrorNumber"),j(this,"utm"),j(this,"visitorID"),j(this,"checkinSendProps"),j(this,"elementRef"),j(this,"pingTimer"),this.shadow=this.attachShadow({mode:"open"}),this.elementRef=document.createElement("div"),this.token=this.getAttribute("token"),this.eventType=this.getAttribute("event-type"),this.fallbackErrorNumber=this.getAttribute("fallback-error"),this.elementRef.textContent="","click"==this.eventType&&(this.elementRef.textContent="click pra ver");let t=S.Analytics.call();this.utm=O(O({},t.fixed.attributes),t.latest.attributes),this.visitorID=this.utm.fingerprint,this.checkin=new r(this.token,this.fallbackErrorNumber),this.checkinSendProps={utm:this.utm,visitor_id:this.visitorID,visitor_user_agent:navigator.userAgent||"no_ua",cid:"1126284224.1633708690",date:(new Date).toISOString()},document.head.createShadowRoot||document.head.attachShadow,this.shadow.appendChild(this.elementRef)}static get observedAttributes(){return["token","fallback-error","event-type"]}pingPong(){return I(this,null,(function*(){const t={token:this.token,visitor:this.visitorID,number:this.checkin.result.number};return yield l.call(t)}))}checkIfNumberIsAvailable(t){return I(this,null,(function*(){if(!this.checkin.loading){if(t=t||0,clearInterval(this.pingTimer),t>=3)return console.log("CallTracking checkin was fail"),this.elementRef.textContent=this.fallbackErrorNumber,!1;this.checkin.clear(),yield this.checkin.send(this.checkinSendProps),this.elementRef.textContent=this.checkin.result.number,t=0,this.pingTimer=setInterval((()=>I(this,null,(function*(){if(!(yield this.pingPong()).success)return this.elementRef.textContent="",t++,this.checkIfNumberIsAvailable(t)}))),1e4)}}))}notifyCallTrackingCheckout(){return I(this,null,(function*(){return clearInterval(this.pingTimer),this.checkin&&(o.call({token:this.token,number:this.checkin.result.number}),this.checkin.clear()),this.elementRef.textContent="",!0}))}connectedCallback(){return I(this,null,(function*(){console.log("CallTracking element added to page."),"click"==this.eventType?this.elementRef.addEventListener("click",(()=>I(this,null,(function*(){this.elementRef.textContent="-",yield this.checkIfNumberIsAvailable()})))):yield this.checkIfNumberIsAvailable(),document.addEventListener("visibilitychange",(()=>I(this,null,(function*(){if(null==document.visibilityState||"visible"===document.visibilityState)return"load"==this.eventType&&(yield this.checkIfNumberIsAvailable()),!0;setTimeout((()=>{"visible"!==document.visibilityState&&this.notifyCallTrackingCheckout()}),100)})))),window.addEventListener("beforeunload",(()=>(console.log("CallTracking beforeunload invoked"),this.notifyCallTrackingCheckout(),!0))),window.addEventListener("online",(t=>{"load"==this.eventType&&this.checkIfNumberIsAvailable()})),window.addEventListener("offline",(t=>{console.log("CallTracking is now offline"),this.notifyCallTrackingCheckout(),this.elementRef.textContent=this.fallbackErrorNumber}))}))}disconnectedCallback(){return I(this,null,(function*(){console.log("CallTracking element removed from page."),yield this.notifyCallTrackingCheckout()}))}}window.customElements.define("call-tracking",P)})()})();